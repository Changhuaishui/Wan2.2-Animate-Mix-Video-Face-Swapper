---
created: 2025-11-12T09:32:35 (UTC +08:00)
tags: [通义万相,视频换人,视频生成API]
source: https://help.aliyun.com/zh/model-studio/wan-animate-mix-api?spm=a2c4g.11186623.help-menu-2400256.d_2_3_6.45505993jVhQjj%E3%80%8D
author: 
---

# 通义万相-视频换人-大模型服务平台百炼

> ## Excerpt
> 通义万相-视频换人模型能够依据人物图片和参考视频，将视频中的主角替换为图片中的角色，同时保留原视频的场景、光照和色调，实现无缝换人。

---
-   **核心功能：** 在不改变原始视频的动作、表情及环境的条件下，将视频中的角色替换为指定图片中的人物。
    
-   **适用场景：**适用于二次创作、影视后期制作等需要进行角色替换的场景。
    

## **效果示例**

通义万相-视频换人模型wan2.2-animate-mix提供标准模式`wan-std`和专业模式`wan-pro`两种服务模式，不同模式在效果和计费上存在差异，详情参见[计费与限流](https://help.aliyun.com/zh/model-studio/wan-animate-mix-api?spm=a2c4g.11186623.help-menu-2400256.d_2_3_6.45505993jVhQjj%E3%80%8D#ce68f54f7bbqe)。

|**人物图片**|**参考视频**|**输出视频（标准模式**`**wan-std**`**）**|**输出视频（专业模式**`**wan-pro**`**）**|
|---|---|---|---|

|**人物图片**|**参考视频**|**输出视频（标准模式**`**wan-std**`**）**|**输出视频（专业模式**`**wan-pro**`**）**|
|---|---|---|---|
|![mix_input_image](%E9%80%9A%E4%B9%89%E4%B8%87%E7%9B%B8-%E8%A7%86%E9%A2%91%E6%8D%A2%E4%BA%BA-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0%E7%99%BE%E7%82%BC/p1008733.jpg)||||

## HTTP调用

您需要已[获取API Key](https://help.aliyun.com/zh/model-studio/get-api-key)并[配置API Key到环境变量](https://help.aliyun.com/zh/model-studio/configure-api-key-through-environment-variables)。

**重要**

北京和新加坡地域拥有独立的 **API Key** 与**请求地址**，不可混用，跨地域调用将导致鉴权失败或服务报错。

**北京地域**：`POST https://dashscope.aliyuncs.com/api/v1/services/aigc/image2video/video-synthesis`

**新加坡地域**：`POST https://dashscope-intl.aliyuncs.com/api/v1/services/aigc/image2video/video-synthesis`

由于视频生成耗时较长，HTTP API 采用异步模式，调用流程分两步：

1.  **创建任务获取任务ID**：发送一个请求创建任务，该请求会返回**任务ID（task\_id）**。
    
2.  **根据任务ID查询结果**：使用task\_id轮询任务状态，直到任务完成并获得视频URL。
    

### 步骤1：创建任务获取任务ID

**说明**

-   创建成功后，使用接口返回的 `task_id` 查询结果，task\_id 有效期为 24 小时。**请勿重复创建任务**，轮询获取即可。
    
-   新手指引请参见[Postman](https://help.aliyun.com/zh/model-studio/first-call-to-image-and-video-api)。
    

|#### 请求参数|视频换人
|---|---|
以下为北京地域 base\_url ，若使用新加坡地域的模型，需将base\_url替换为：`https://dashscope-intl.aliyuncs.com/api/v1/services/aigc/image2video/video-synthesis`
```curl
curl --location 'https://dashscope.aliyuncs.com/api/v1/services/aigc/image2video/video-synthesis' \
--header 'X-DashScope-Async: enable' \
--header "Authorization: Bearer $DASHSCOPE_API_KEY" \
--header 'Content-Type: application/json' \
--data '{
    "model": "wan2.2-animate-mix",
    "input": {
        "image_url": "https://help-static-aliyun-doc.aliyuncs.com/file-manage-files/zh-CN/20250919/bhkfor/mix_input_image.jpeg",
        "video_url": "https://help-static-aliyun-doc.aliyuncs.com/file-manage-files/zh-CN/20250919/wqefue/mix_input_video.mp4"
    },
    "parameters": {
        "mode": "wan-std"
    }
  }'
```|
|##### 请求头（Headers）|
|**Content-Type** `_string_` **（必选）**
请求内容类型。此参数必须设置为`application/json`。|
|**Authorization** `_string_`**（必选）**
请求身份认证。接口使用阿里云百炼API-Key进行身份认证。示例值：Bearer sk-xxxx。|
|**X-DashScope-Async** `_string_` **（必选）**
异步处理配置参数。HTTP请求只支持异步，**必须设置为**`**enable**`。
**重要**
缺少此请求头将报错：“current user api does not support synchronous calls”。|
|##### 请求体（Request Body）|
|**model** `_string_` **（必选）**
模型名称，必须设置为`wan2.2-animate-mix`。|
|**input** `_object_` **（必选）**
输入参数对象，包含以下字段：
**属性**
**image\_url** `_string_` **（必选）**
输入图像的公网可访问的HTTP/HTTPS链接，不能包含中文等非ASCII字符，否则需要进行编码后再传入。
本地文件可通过[上传文件获取临时URL](https://help.aliyun.com/zh/model-studio/get-temporary-file-url)。
-   **格式限制**：JPG、JPEG、PNG、BMP、WEBP
    
-   **尺寸限制**：图像的宽度和高度都在`[200,4096]`像素范围内，宽高比在1:3至3:1范围内。
    
-   **大小限制**：不超过5MB
    
-   **示例**：`https://help-static-aliyun-doc.aliyuncs.com/file-manage-files/zh-CN/20250919/bhkfor/mix_input_image.jpeg`
    
**video\_url** `_string_` **（必选）**
输入视频的公网可访问的HTTP/HTTPS链接，不能包含中文等非ASCII字符，否则需要进行编码后再传入。
本地文件可通过[上传文件获取临时URL](https://help.aliyun.com/zh/model-studio/get-temporary-file-url)。
**建议：**提高参考视频的分辨率和帧率，可有效提升生成视频的画质效果。
-   **格式限制**：MP4、AVI、MOV
    
-   **尺寸限制**：视频的宽度和高度**都**在`[200, 2048]`像素范围内，宽高比在1:3至3:1范围内。
    
-   **大小限制**：不超过200MB
    
-   **时长限制**：不小于2s且不大于30s
    
-   **示例**：`https://help-static-aliyun-doc.aliyuncs.com/file-manage-files/zh-CN/20250919/wqefue/mix_input_video.mp4`|
|**parameters** `_object_` **（必选）**
**属性**
**check\_image** `_bool_` （可选）
是否进行图像检测。
-   `true`：**默认值**，接口将对传入的图片进行检测。
    
-   `false`：跳过图片检测环节，直接对图片进行后续处理。
    
**mode** `_string_` **（必选）**
模型服务模式选择，支持两种模式。
-   `wan-std`：标准模式，生成速度较快，性价比高，适用于快速预览和基础动画场景，处理1s视频耗时约9s。
    
-   `wan-pro`：专业模式，动画流畅度更高，效果更佳，但处理时间和费用也相应增加，处理1s视频耗时约16s。
    
详情请参见[效果示例](https://help.aliyun.com/zh/model-studio/wan-animate-mix-api?spm=a2c4g.11186623.help-menu-2400256.d_2_3_6.45505993jVhQjj%E3%80%8D#55a79354d2s4j)和[计费与限流](https://help.aliyun.com/zh/model-studio/wan-animate-mix-api?spm=a2c4g.11186623.help-menu-2400256.d_2_3_6.45505993jVhQjj%E3%80%8D#ce68f54f7bbqe)。|

|#### 响应参数|成功响应
|---|---|
异常响应
请保存 task\_id，用于查询任务状态与结果。
```json
{
    "output": {
        "task_status": "PENDING",
        "task_id": "0385dc79-5ff8-4d82-bcb6-xxxxxx"
    },
    "request_id": "4909100c-7b5a-9f92-bfe5-xxxxxx"
}
```
创建任务失败，请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)进行解决。
```json
{
    "code":"InvalidApiKey",
    "message":"Invalid API-key provided.",
    "request_id":"fb53c4ec-1c12-4fc4-a580-xxxxxx"
}
```|
|**output** `_object_`
任务输出信息。
**属性**
**task\_id** `_string_`
任务ID。查询有效期24小时。
**task\_status** `_string_`
任务状态。
**枚举值**
-   PENDING：任务排队中
    
-   RUNNING：任务处理中
    
-   SUCCEEDED：任务执行成功
    
-   FAILED：任务执行失败
    
-   CANCELED：任务已取消
    
-   UNKNOWN：任务不存在或状态未知|
|**request\_id** `_string_`
请求唯一标识。可用于请求明细溯源和问题排查。|
|**message** `_string_`
请求失败的详细信息。请求成功时不会返回此参数，详情请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)。|
|**code** `_string_`
请求失败的错误码。请求成功时不会返回此参数，详情请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)。|

### 步骤2：根据任务ID查询结果

**北京地域**：`GET https://dashscope.aliyuncs.com/api/v1/tasks/{task_id}`

**新加坡地域**：`GET https://dashscope-intl.aliyuncs.com/api/v1/tasks/{task_id}`

**说明**

-   **轮询建议**：视频生成过程约需数分钟，建议采用**轮询**机制，并设置合理的查询间隔（如 15 秒）来获取结果。
    
-   **任务状态流转**：PENDING（排队中）→ RUNNING（处理中）→ SUCCEEDED（成功）/ FAILED（失败）。
    
-   **结果链接**：任务成功后返回视频链接，有效期为 **24 小时**。建议在获取链接后立即下载并转存至永久存储（如[阿里云 OSS](https://help.aliyun.com/zh/oss/user-guide/what-is-oss)）。
    
-   **task\_id 有效期**：**24小时**，超时后将无法查询结果，接口将返回任务状态为`UNKNOWN`。
    
-   **QPS 限制**：查询接口默认QPS为20。如需更高频查询或事件通知，建议[配置异步任务回调](https://help.aliyun.com/zh/model-studio/async-task-api)。
    
-   **更多操作**：如需批量查询、取消任务等操作，请参见[管理异步任务](https://help.aliyun.com/zh/model-studio/manage-asynchronous-tasks#f26499d72adsl)。
    

|#### 请求参数|查询任务结果
|---|---|
请将`0385dc79-5ff8-4d82-bcb6-xxxxxx`替换为真实的task\_id。
> 以下为北京地域base\_url ，若使用新加坡地域的模型，需将base\_url替换为：`https://dashscope-intl.aliyuncs.com/api/v1/tasks/0385dc79-5ff8-4d82-bcb6-xxxxxx`
```curl
curl -X GET https://dashscope.aliyuncs.com/api/v1/tasks/0385dc79-5ff8-4d82-bcb6-xxxxxx \
--header "Authorization: Bearer $DASHSCOPE_API_KEY"
```|
|##### **请求头（Headers）**|
|**Authorization** `_string_`**（必选）**
请求身份认证。接口使用阿里云百炼API-Key进行身份认证。示例值：Bearer sk-xxxx。|
|##### **URL路径参数（Path parameters）**|
|**task\_id** `_string_`**（必选）**
任务ID。|

|#### **响应参数**|任务执行成功
|---|---|
任务执行失败
视频URL仅保留24小时，超时后会被自动清除，请及时保存生成的视频。
```json
{
    "request_id": "a67f8716-18ef-447c-a286-xxxxxx",
    "output": {
        "task_id": "0385dc79-5ff8-4d82-bcb6-xxxxxx",
        "task_status": "SUCCEEDED",
        "submit_time": "2025-09-18 15:32:00.105",
        "scheduled_time": "2025-09-18 15:32:15.066",
        "end_time": "2025-09-18 15:34:41.898",
        "results": {
            "video_url": "http://dashscope-result-bj.oss-cn-beijing.aliyuncs.com/xxxxx.mp4?Expires=xxxxxx"
        }
    },
    "usage": {
        "video_duration": 5.2,
        "video_ratio": "standard"
    }
}
```
若任务执行失败，task\_status将置为 FAILED，并提供错误码和信息。请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)进行解决。
```json
{
    "request_id": "daad9007-6acd-9fb3-a6bc-xxxxxx",
    "output": {
        "task_id": "fe8aa114-d9f1-4f76-b598-xxxxxx",
        "task_status": "FAILED",
        "code": "InternalError",
        "message": "xxxxxx"
    }
}
```|
|**output** `_object_`
任务输出信息。
**属性**
**task\_id** `_string_`
任务ID。查询有效期24小时。
**task\_status** `_string_`
任务状态。
**枚举值**
-   PENDING：任务排队中
    
-   RUNNING：任务处理中
    
-   SUCCEEDED：任务执行成功
    
-   FAILED：任务执行失败
    
-   CANCELED：任务已取消
    
-   UNKNOWN：任务不存在或状态未知
    
**submit\_time** `_string_`
任务提交时间。格式为 YYYY-MM-DD HH:mm:ss.SSS。
**scheduled\_time** `_string_`
任务执行时间。格式为 YYYY-MM-DD HH:mm:ss.SSS。
**end\_time** `_string_`
任务完成时间。格式为 YYYY-MM-DD HH:mm:ss.SSS。
**results** `_object_`
**属性**
**video\_url** `_string_`
视频URL。仅在 task\_status 为 SUCCEEDED 时返回。
链接有效期24小时，可通过此URL下载视频。视频格式为MP4（H.264 编码）。
**code** `_string_`
请求失败的错误码。请求成功时不会返回此参数，详情请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)。
**message** `_string_`
请求失败的详细信息。请求成功时不会返回此参数，详情请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)。|
|**usage** `_object_`
输出信息统计。只对成功的结果计数。
**属性**
**video\_duration** `_float_`
本次请求生成视频时长计量，单位：秒。
**video\_ratio** `_string_`
本次请求视频服务模式选择，**枚举值：** `standard`，`pro`。
若选择标准模式`wan-std`为`standard`，选择专业模式`wan-pro`则为`pro`。|
|**request\_id** `_string_`
请求唯一标识。可用于请求明细溯源和问题排查。|

## **使用限制**

**数据时效**：任务task\_id和视频URL均只保留 24 小时，过期后将无法查询或下载，请及时[下载视频到本地](https://help.aliyun.com/zh/model-studio/wan-animate-mix-api?spm=a2c4g.11186623.help-menu-2400256.d_2_3_6.45505993jVhQjj%E3%80%8D#866ccf3fa3y1p)。

**内容审核**：输入与输出内容均会经过内容安全审核，包含违规内容的请求将报错“IPInfringementSuspect”或“DataInspectionFailed”，具体参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)。

**网络访问配置**：视频链接存储于阿里云 OSS，如果业务系统因安全策略无法访问外部OSS链接，请将以下 OSS 域名加入网络访问白名单。

```plaintext
# OSS域名列表
dashscope-result-bj.oss-cn-beijing.aliyuncs.com
dashscope-result-hz.oss-cn-hangzhou.aliyuncs.com
dashscope-result-sh.oss-cn-shanghai.aliyuncs.com
dashscope-result-wlcb.oss-cn-wulanchabu.aliyuncs.com
dashscope-result-zjk.oss-cn-zhangjiakou.aliyuncs.com
dashscope-result-sz.oss-cn-shenzhen.aliyuncs.com
dashscope-result-hy.oss-cn-heyuan.aliyuncs.com
dashscope-result-cd.oss-cn-chengdu.aliyuncs.com
dashscope-result-gz.oss-cn-guangzhou.aliyuncs.com
dashscope-result-wlcb-acdr-1.oss-cn-wulanchabu-acdr-1.aliyuncs.com
```

## **计费与限流**

wan2.2-animate-mix 模型提供标准模式`wan-std`和专业模式`wan-pro`两种服务模式，以满足不同场景对视频换人效果的需求。

中国大陆（北京）

国际（新加坡）

|**模型名称**|**模型服务**|**服务简介**|**限流（主账号与RAM子账号共用）**|**计费单价**|**免费额度**[（查看）](https://help.aliyun.com/zh/model-studio/new-free-quota)|
|---|---|---|---|---|---|
|**任务下发接口RPS限制**|**同时处理中任务数量**|
|wan2.2-animate-mix|标准模式`wan-std`|生成速度快，满足基础动画演示等轻需求，性价比高。|5|1|0.6元/秒|两种服务共50秒|
|专业模式`wan-pro`|动画流畅度高，动作表情过渡自然，效果更接近真实拍摄。|0.9元/秒|

|**模型名称**|**模型服务**|**服务简介**|**限流（主账号与RAM子账号共用）**|**计费单价**|**免费额度**[（查看）](https://help.aliyun.com/zh/model-studio/new-free-quota)|
|---|---|---|---|---|---|
|**任务下发接口RPS限制**|**同时处理中任务数量**|
|wan2.2-animate-mix|标准模式`wan-std`|生成速度快，满足基础动画演示等轻需求，性价比高。|5|1|1.321063元/秒|无免费额度|
|专业模式`wan-pro`|动画流畅度高，动作表情过渡自然，效果更接近真实拍摄。|1.908202元/秒|

**计费规则**

-   **计费模式**：采用**按量后付费**模式。按成功生成的**视频秒数**计费，计费时长以任务成功响应中的 `usage.video_duration` 字段为准。
    
    **点击查看计费示例**
    
    费用在免费额度耗尽后开始计算。计费公式为：**总费用 = 视频实际生成时长 (秒) × 所选服务模式的单价。**
    
    假设您调用北京地域的模型生成一个视频，任务成功后返回的 `usage.video_duration` 为 5.2 秒，且选择的是标准模式`wan-std`。
    
    费用计算为 5.2 秒 \* 0.6元/秒 = 3.12元
    
    注：计费时长以任务成功后返回的 `usage.video_duration` 字段为最终依据。
    
-   **抵扣顺序**：优先消耗免费额度。额度用尽后，默认转为按量付费。可开启“[免费额度用完即停](https://help.aliyun.com/zh/model-studio/new-free-quota#d1cb80ac11i92)”功能，以避免免费额度耗尽后产生额外费用。详情请参见[免费额度](https://help.aliyun.com/zh/model-studio/new-free-quota)。
    
-   **调用失败不计费**：模型调用失败或处理错误不产生任何费用，也不消耗免费额度。
    

**限流**：主账号与RAM子账号合计请求频率上限为5次/秒，最多有1个任务在处理中，超出限制的新任务将进入排队队列。模型限流规则及常见问题，请参见[限流](https://help.aliyun.com/zh/model-studio/rate-limit)。

## **错误码**

如果模型调用失败并返回报错信息，请参见[错误信息](https://help.aliyun.com/zh/model-studio/error-code)进行解决。

## **常见问题**

**Q: 如何查看模型调用量？**

A: 模型的调用信息存在小时级延迟，在模型调用完约一小时后，请在模型观测（[北京](https://bailian.console.aliyun.com/?tab=model#/model-telemetry)或[新加坡](https://modelstudio.console.aliyun.com/?tab=model#/model-telemetry)）页面，查看调用量、调用次数、成功率等指标。[如何查看模型调用记录？](https://help.aliyun.com/zh/model-studio/new-free-quota#ab6ba5c538rn3)

**Q: 如何优化生成视频的效果**?

A: 可参考以下建议

1.  确保输入图片与参考视频中的人物画幅占比相似。
    
2.  尽量保持图片和视频中人物的身材比例一致。
    
3.  使用高清素材，避免使用模糊图片和低帧率视频，确保细节识别准确。
    

**Q: 如何将临时的视频链接转为永久链接？**

A: 不能直接转换该链接。正确的做法是：后端服务获取到url后，通过代码下载该视频文件，然后将其上传到永久对象存储服务（如阿里云 OSS），生成一个新的、永久访问链接。

**示例代码：下载视频到本地**

```python
import requests

def download_and_save_video(video_url, save_path):
    try:
        response = requests.get(video_url, stream=True, timeout=300) # 设置超时
        response.raise_for_status() # 如果HTTP状态码不是200，则引发异常
        with open(save_path, 'wb') as f:
            for chunk in response.iter_content(chunk_size=8192):
                f.write(chunk)
        print(f"视频已成功下载到: {save_path}")
        # 此处可以接上传到永久存储的逻辑
    except requests.exceptions.RequestException as e:
        print(f"下载视频失败: {e}")

if __name__ == '__main__':
    video_url = "http://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/xxxx"
    save_path = "video.mp4"
    download_and_save_video(video_url, save_path)
```

**Q: 返回的视频链接可以在浏览器中直接播放吗？**

A: 不建议这样做，因为链接会在 24 小时后失效。最佳实践是后端下载转存后，使用永久链接进行视频播放。
